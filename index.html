<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Doc Scanner Pro</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  font-family: Arial;
  background:#f2f2f2;
}
.header{
  background:#000;
  color:white;
  text-align:center;
  padding:15px;
  font-size:18px;
}
.container{
  padding:15px;
}
input, button{
  width:100%;
  padding:12px;
  margin-top:10px;
  font-size:16px;
}
button{
  background:black;
  color:white;
  border:none;
}
.preview img{
  width:100%;
  margin-top:10px;
  border-radius:8px;
  filter: grayscale(100%);
}
</style>
</head>

<body>

<div class="header">
Doc Scanner Pro
</div>

<div class="container">

<!-- Default Auto Name -->
<input type="text" id="name" value="Scanned by Aamin046" placeholder="Enter Your Name">

<input type="file" id="imageInput" accept="image/*" multiple>

<div id="preview"></div>

<button onclick="generatePDF()">Download PDF</button>

</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<script>

let uploadedImages = [];

document.getElementById("imageInput").addEventListener("change", function(event){
  const files = event.target.files;
  uploadedImages = [];
  document.getElementById("preview").innerHTML = "";

  if(files.length > 500){
    alert("Maximum 500 images allowed");
    return;
  }

  Array.from(files).forEach(file => {
    const reader = new FileReader();
    reader.onload = function(e){
      uploadedImages.push(e.target.result);

      let img = document.createElement("img");
      img.src = e.target.result;
      document.getElementById("preview").appendChild(img);
    }
    reader.readAsDataURL(file);
  });
});

function generatePDF(){

  if(uploadedImages.length === 0){
    alert("Upload images first");
    return;
  }

  const { jsPDF } = window.jspdf;
  const doc = new jsPDF('p','mm','a4');
  const name = document.getElementById("name").value;

  let pageWidth = doc.internal.pageSize.getWidth();
  let pageHeight = doc.internal.pageSize.getHeight();

  uploadedImages.forEach((image, index)=>{

    if(index !== 0){
      doc.addPage();
    }

    let img = new Image();
    img.src = image;

    doc.addImage(image,'JPEG',0,0,pageWidth,pageHeight);

    // Watermark
    if(name){
      doc.setFontSize(30);
      doc.setTextColor(150);
      doc.text(name, pageWidth/2, pageHeight/2, {align:"center", angle:45});
    }

    // Page Number
    doc.setFontSize(12);
    doc.setTextColor(0);
    doc.text("Page " + (index+1) + " of " + uploadedImages.length, 
             pageWidth/2, pageHeight-10, {align:"center"});

  });

  doc.save("scanned-document.pdf");
}

</script>

</body>
</html>
